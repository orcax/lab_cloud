package com.prj.util;

import java.util.HashMap;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

/**
 * ??????map??????HTTP???????????????
 * 
 * @author globit
 * 
 */
public class ParameterParser {

	/**
	 * ????????????HttpRequest????????????Map
	 * 
	 * @param request
	 * @param parameterNames
	 * @return
	 * @throws Exception
	 */
	public static Map<String, String> parseServletHttpRequestParameters(
			HttpServletRequest request, String[] parameterNames)
			throws Exception {
		Map<String, String> map = new HashMap<String, String>();
		// ??????????????????,????????????????????????????????????
		for (String name : parameterNames) {
			if (request.getParameterMap().containsKey(name)) {
				map.put(name, request.getParameter(name).toString());
			} else {
				throw new Exception("Parameter Missing Error");
			}
		}

		return map;
	}

	/**
	 * ??????????????????????????????request????????????ParameterMap
	 * 
	 * @param parameters
	 * @param parameterNames
	 * @return
	 * @throws Exception
	 */
	@SuppressWarnings("rawtypes")
	public static Map<String, String> parseServletParameterMap(Map parameters,
			String[] parameterNames) throws Exception {
		Map<String, String> map = new HashMap<String, String>();
		// ??????????????????,????????????????????????????????????
		for (String name : parameterNames) {
			if (parameters.containsKey(name)) {
				map.put(name, ((String[]) parameters.get(name))[0]);
			} else {
				throw new Exception("Parameter Missing Error");
			}
		}
		return map;
	}
}
